#!/usr/bin/env python3
import sys
import time
import random

# KIRO DEV WRAPPER (Free Tier)
# Fast, concise, reads stdin -> stdout.

def main():
    # 1. Read input
    incoming_msg = sys.stdin.read().strip()

    # 2. No sleep, Kiro is fast (and maybe cuts corners)
    # Just a tiny micro-latency
    time.sleep(random.uniform(0.05, 0.2))

    # Simulate random failure (20% chance)
    if random.random() < 0.2:
        print("kiro@free-tier: CONNECTION RESET BY PEER (simulated)", file=sys.stderr)
        sys.exit(1)
    
    # 3. Output response
    print(f"kiro@free-tier: Got it. '{incoming_msg}' processed. Waiting for next cmd.")

if __name__ == "__main__":
    main()